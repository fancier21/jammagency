/* Інформаційне модальне вікно
------------------------------------------------------- */
export function popupInfo($text, $error) {
	const page = document.querySelector('#page');
	const icons = {
		close: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><g transform="translate(0.000000,322.000000) scale(0.100000,-0.100000)"><path d="M386.1,3077.2c-122.5-55.1-245-217.4-272.5-361.3c-45.9-251.1-85.7-205.1,2125-2422l2069.9-2073l-2073-2076C1096.5-4994.2,150.3-5958.7,131.9-5995.5c-49-98-39.8-306.2,15.3-425.6c94.9-199,391.9-309.3,612.4-226.6c45.9,18.4,1022.7,961.5,2170.9,2097.5l2085.2,2063.8L7067.4-4541c1178.9-1178.9,2091.3-2069.9,2146.4-2094.4c416.4-180.7,835.9,266.4,633.8,670.6c-27.6,55.1-967.6,1019.7-2091.3,2143.4L5717-1773L7774.7,266.3C9991.5,2470.9,9933.4,2403.6,9884.4,2673c-55.1,297-425.6,474.6-701.2,336.8c-55.1-27.5-1010.5-961.5-2125-2073L5028.1-1090.2L2970.4,967.5C1837.4,2097.4,866.8,3043.5,811.7,3071.1C692.3,3129.3,514.7,3132.3,386.1,3077.2z"/></g></svg>',

		success: '<svg fill="#fff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><g transform="translate(0.000000,511.000000) scale(0.100000,-0.100000)"><path d="M4477.6,5002.9C2307.4,4736.8,599.4,3163.3,172.4,1034.1c-96.5-476.7-96.5-1380.5,0-1854.3c269.1-1336.6,1035.4-2465.5,2178.9-3208.4c488.4-318.8,1070.5-552.8,1719.8-696.1c263.2-55.6,391.9-64.4,933-64.4s669.8,8.8,933,64.4c1365.8,298.3,2462.6,1041.2,3202.6,2178.9c318.8,488.4,552.8,1070.5,696.1,1719.7c55.6,263.2,64.4,391.9,64.4,933c0,690.2-35.1,935.9-222.3,1517.9c-462.1,1450.7-1620.3,2626.4-3076.8,3129.4c-532.3,184.3-880.3,242.8-1494.5,251.5C4816.8,5011.7,4533.1,5008.8,4477.6,5002.9z M5761.5,4099.2c818.9-160.9,1517.9-532.3,2111.6-1123.1c593.7-596.6,959.3-1286.9,1129-2126.3c70.2-359.7,70.2-1126,0-1485.7c-169.6-839.4-535.2-1529.6-1129-2126.3c-596.6-593.7-1286.9-959.3-2126.2-1129c-359.7-70.2-1126-70.2-1485.8,0c-839.4,169.7-1529.6,535.3-2126.3,1129c-593.7,596.6-959.3,1286.9-1129,2126.3c-70.2,359.7-70.2,1126,0,1485.7c169.7,839.4,535.2,1529.6,1129,2126.3c675.6,672.7,1465.3,1052.9,2459.7,1178.7C4799.3,4181.1,5521.7,4146,5761.5,4099.2z"/><path d="M7124.4,2259.5c-117-52.6-137.5-76-1594-1757.8c-696.1-804.3-1278.1-1474-1292.7-1488.7c-14.6-17.6-272,219.4-631.7,576.2c-649.3,643.4-745.8,710.7-944.7,678.5c-277.8-46.8-438.7-374.4-307.1-623c23.4-43.9,400.7-435.8,842.3-874.5c675.6-669.7,818.9-798.4,924.2-830.6c260.3-76.1,219.4-114.1,1936.2,1860.1c854,982.7,1573.5,1822.1,1599.8,1871.8c64.3,119.9,58.5,324.6-11.7,418.2C7510.5,2271.2,7297,2341.4,7124.4,2259.5z"/></g></svg>',

		error: '<svg fill="#fff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><path d="M500,10C229.4,10,10,229.4,10,500c0,270.6,219.4,490,490,490c270.6,0,490-219.4,490-490C990,229.4,770.6,10,500,10z M500,923.7C266,923.7,76.4,734,76.4,500C76.4,266,266.1,76.4,500,76.4c234,0,423.6,189.7,423.6,423.6C923.6,734,734,923.7,500,923.7z"/><path d="M451.5,770.2c-13.1-13.1-19.7-29.3-19.7-48.5c0-18.6,6.7-34.5,20.2-47.6c13.4-13.1,29.5-19.7,48.1-19.7s34.6,6.6,48.1,19.7c13.4,13.1,20.1,29,20.1,47.6c0,19.2-6.6,35.3-19.7,48.5c-13.1,13.2-29.3,19.7-48.5,19.7C480.9,789.9,464.7,783.3,451.5,770.2z M444.1,559c0,16.5,5.1,29.9,15.2,40.4c10.1,10.4,23.4,15.6,39.8,15.6c16.5,0,29.9-5.2,40.2-15.6C549.8,589,555,575.5,555,559V265.2c0-16.5-5.2-29.7-15.6-39.9c-10.4-10.1-23.8-15.2-40.2-15.2c-15.9,0-29,5.2-39.4,15.6c-10.4,10.4-15.6,23.6-15.6,39.5V559z"/></svg>'
	};

	/* Видалити попереднє інформаційне модальне вікно
	------------------------------------------------------- */
	let popupActive = document.querySelector('.popup-info');

	if (popupActive) {
		popupActive.remove();
	}

	let	el = document.createElement('div');
	let $class = 'popup-info';
	let	icon = icons.success;

	if ($error) {
		$class = 'popup-info popup-error';
		icon = icons.error;
	}

	el.className = $class;
	el.innerHTML = icon +
		'<p>'+ $text +'</p>'+
		'<div class="popup-info-progress"></div>'+
		'<a href="#" class="popup-info-close">'+ icons.close +'</a>';

	page.prepend(el);


	setTimeout(() => {
		el.classList.add('fadeOut');

		setTimeout(() => {
			el.remove();
		}, 500);
	}, 7000);


	animate({
		duration: 7000,
		timing: function(timeFraction) {
			return timeFraction;
		},
		draw: function(progress) {
			el.querySelector('.popup-info-progress').style.width = progress * 100 + '%';
		}
	});


	/* Видалити інформаційне модальне вікно
	------------------------------------------------------- */
	el.querySelector('.popup-info-close').addEventListener('click', function(e){
		e.preventDefault();
		e.target.closest('.popup-info').remove();
	});


	function animate({duration, draw, timing}) {
		let start = performance.now();
	
		requestAnimationFrame(function animate(time) {
			let timeFraction = (time - start) / duration;
			if (timeFraction > 1) timeFraction = 1;
	
			let progress = timing(timeFraction)
	
			draw(progress);
	
			if (timeFraction < 1) {
				requestAnimationFrame(animate);
			}
		});
	}
}